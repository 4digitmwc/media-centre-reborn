---
postName: "mathematical-maniac"
title: "Coffee Session with Mathematical Maniacs"
subtitle: "What was hidden inside the mind of Mathematical Maniacs? How do they use math to create the fascinating phenomenas in osu!mania? Let's find out in this coffee session discussion!"
authors:
  - "evening"
  - "komi"
  - "howtoplayln"
table_of_contents: true
---

It was my usual morning, I decided to grab some coffee to start my day.

After I walked into a coffee shop, I ordered my favorite morning drink:

*"Medium Roast Americano, please"*

Taking a look around my greyed, monochromatic world, I saw two people behind me, talking about the cosmic infrastructure. The aura of their intelligence made me sacrifice my introvertness, and start a conversation...

*"We are speaking the same language, up for a talk?"* 

I said without hesitation. 

Of course, I paid for both of their coffee. it was not really that expensive for a speciality coffee place, where they took coffee beans from various planets, blended in the ratio of a corner point optimal solution, which always gives the perfect result regardless the requirements of the customers.

*"I would like to know your background first, would you mind introduce yourself a bit?"* 

I said.

---

## Komirin

I'm Komi, you may also know me as Quenlla. I'm actually neither a mania mapper nor from a maths-related field, but I somehow always get involved in mania-related maths projects. No idea how it happens!

---

## Evening: 

I'm Evening, a Data Magician: I like data & magic, and can do magic on data.

I'm also a mapper: I like music, and translating emotions into beatmap mediums to share to the world.

I merged these 2 hobbies of mine, one empowering the other; results in unusual art pieces, experienced by a tiny fraction of people

---

And it's my turn...

## Index:

So nice to meet you all here. You two can call me Index, I have been here for quite a while now. I made some maps, songs and most importantly, played with mathematics and statistics.

---

A bell rings and the pleasant aroma of very magical consumables wafts through the air, following with the usual voice:

*"Medium Roast Americano for Index, Caf√© con leche for Komi and Mocha for Evening!"*

We grabbed our coffee and went back to our seat.

I took a sip of my coffee -- it was the best ones I've ever tasted -- then I initialized the conversation:

*"What are the things in osu!mania that you have been applying mathematical concepts? Is there any specific ones you are proud of?"*

---

## Evening: 

In most of my complex maps, math is always involved. Many are unclear on how math is involved here, for example, how do you even begin "mathing" SVs? Start with translating that into something imaginable, a parallel real-life problem, it'll be much easier.

### PLANET//SHAPER: Normalization

1) **Problem:** The BPM now is 100, however, the common BPM is 200, what's the SV needed to normalize?

   **Parallel:** "Given that we will reach Station A in 30 minutes, how much faster do we need to travel to reach in 15 minutes?"
  
2) **Problem:** Given that the SV for the 1st half is 5/6, what's the SV needed for the 2nd half to normalize?

   **Parallel:** "Given that we travelled half the distance in 6 minutes, how much faster do we need to travel to reach in the next 4 minutes?"

### Backbeat Maniac: Anti-Normalization

3) **Problem:** Given that the note is 1/2 distance away, how can I make it seem like 1/1?

   **Parallel:** "Given that I travel 0.5km to work, can I trick someone that I am 1km away?"

### Spin Eternally: Vectors

4) **Problem:** Given that the note travels linearly from y=1 to y=-1 within 1 second, can I travel in a cosine wave (0, pi)?

   **Parallel:** "Given that we must reach work within 1 hour, must we travel at a constant speed?"

5) **Problem:** Instead of making y go to -1, can I travel back to 1 by using cos(0) to cos(2pi)?

   **Parallel:** "Given that I want to go home because work is cancelled, what would my route look like?"

### Realising Imaginations through Math

I'm always proud of maps that realises my elaborate imagination, such as Aleph-0 and Spin Eternally. Being able to express my thoughts on music through visuals and maps, then seeing it come to life has always been the reason why I map. Math, Python, Excel, Google Sheets are tools that help me realise dreams, never the other way. 

---

Having learned to wield the chaos of polyrhythms with mathematics, this was something I could easily relate to. I said:

*"It is a really cool analogy to visualize the SV as the real-world situation. To be precise, I am also fascinated with these concepts and have the same mindset when I made SVs. This can lead to the concept of using calculus! I remembered using the first order derivative to smoothen SVs and even heat equations from Partial Differential Equations for BPM Line gimmicks! In fact it is just beautiful to not just think, but get your hands on it..."*

As I looked around, memories of the predator being introduced flooded back into my mind. They were static and not as lively as the previous two.

*"How far do you think SV and storyboard innovations can go? As of now, I think that those fascinating BPM lines gimmick are currently the greatest innovation, or if you count unranked/unlovable gimmicks, the p-notes are the really interesting discoveries. But do you think we can push further than this?"*

---

## Evening

Though many creative minds are ready to hinge on new o!m exploits and keen to push boundaries, I'd advice to reconsider.
One must be careful when traversing too deep into innovation within games: Complex SVs (BPMs), p-notes, reverse scrolling etc. relies on exploiting unorthodox game behavior. This means that if it was unintended in the 1st place, you're likely ending up with a dud map when the exploit is fixed.

Furthermore, we've come to a point where pushing boundaries through exploits are resulting in a decrease in QOL:
- Players face lower frame rates for complex gimmicks
- Mappers face difficulty implementing exploits

All because we're bending the universe to work in ways its not supposed to.

Here, breakthroughs rarely happen by exploring the universe, instead, through expanding it by creating your own breakthroughs. If p-notes, reverse scrolling, sb mapping were officially implemented, wouldn't it be much easier than digging into `.osu` files and creating elaborate pipelines? It's easier said than done. 

Tying back to the question, can we push further? I believe we can, but should we? I'm too lazy to do it.

---

## Komi:

While I haven't had the luck, creativeness or ability to ever create a complex storyboard, SV and other BPM-related gimmicks, I sure have been interested in them. Considering the amount of ways we have found to make osu look like not-osu, why stop now? Everyone is welcome to try breaking the game in their favorite way, but as Evening says, always remember that: with p-notes, with negative BPM SVs, with barline gimmicks we're *breaking the game*. In a way, one could even consider it to be ephemeral art, though it has now lasted for quite a long while. Enjoy it while it lasts! I'm sure that, when those can't be made anymore, we'll find a way to break the game again: there's always some combination of numbers that will manage to do it. 

---

*"Personally I really hope we can go further than this too. But I also really see the point that the current breakthrough we have can spark so much creativity into newer gimmick maps, which is nice and enjoyable for both mappers and players too (hopefully) !"*

There was an awkward silence for a few seconds, before I decided to initiate something... It was what I rarely did when I was in this situation but I felt like doing it:

*"How about you, Komi? I would really like to hear what you did from your side too."*

---

## Komi:

Even though I have no training in advanced maths, I've tried to learn some things everytime I've seen they could make my life easier and save me time, and this includes little projects and tools in osu!mania. And even though it's math and not art, my biggest font of inspiration keeps being a shower of scalding water.

### Robustly detecting cheaters

To hide themselves, most cheating software imitate humans, a "natural" behaviour. In 2020, a somewhat new one did this very well, almost perfectly simulating the gameplay of a real person; however, it had one tiny issue, although invisible to the naked eye. And it was the creators' fault, for not knowing their math! 

They had correctly thought that, when a human presses a key to hit a note, they won't always hold the key pressed down for the same amount of time, so they instructed the program to press the key for a random amount of time between 30 and 90ms, with **equal chance** for all the possible durations: this is called a **uniform distribution** However, this is not what humans do: we have a somewhat consistent press duration, with some degree of variability; the further from our "mean" a press duration is, the least likely it will happen: this is called a **normal distribution**, and it rules most of the random processes in nature, including those who involve humans. The typical distribution will also vary depending on the player and the map!

This meant that, to have a go at detecting cheated scores with this program, we just had to decide if it's more similar to a uniform distribution (cheated) or to a normal distribution (human). By just analysing it visually, it became obvious but it was a boring job. What if we could do it automatically? What we did was use a method a **Maximum Likelihood Estimation** to try estimating two distributions to fit our data: a uniform and a normal one. Then we measured which of them is the most similar to our key press data: if the uniform distribution is significantly most similar, that likely meant the score was obtained using cheats!

### Selecting members for team tournaments

Selecting the players of a tournament played in teams is always a tough challenge. Let's imagine the following situation: you're a team captain, and you have 20 players at your national tryouts. However, the team can have 6 players at most, and you know only 3 players will play each map in the qualifiers. How on Earth do you select the team members in a fair way based on your tryouts results? A typical method that generally works is to compute the average ranking of each player across the tryouts and pick the 6 players with best average ranking. However, this could stop you from picking a specialist, someone who struggles in a lot of maps but is really good at one of them. Then, could we possibly select players in a fair way that actually maximizes the total potential of the team?

In the Spanish tryouts, we decided to solve this through something called **Non-linear programming**. Long story told short, this is a mathematical method for optimizing a function, where the constraints that we have for the variables in the function aren't defined linearly. This may sound like klingon, but surprisingly, we can phrase our requirements in a very mathematical way, as we want very precise things:

- We want to **maximize** a function: the sum of the best scores for each map among the chosen players 
- We want to select exactly 6 players
- We want to take into account exactly the 3 maximum scores for each map

This generates a set of constraints and restrictions we can input mathematically and, in general, we can find a solution that gives us the best set of players to select in our team. This one goes for you, SV one-trick-ponies!

---

*"Really nice analogy and fascinating observations on cheat detection there! Pretty sure you have **maximized** your capacity in using mathematical knowledge in both osu! and the real world. I'm surprised by the usage of (non-linear) optimization in players selection for country-based team tournaments as well!"*

*"I also did something similar, but did **Linear Programming** and a model which is much more simplified. I didn't know someone would also have a take on this! Would like to see your approach later too."*

It is my turn again to explain what I did, I really hope everyone would understand me.

---

## Index:

As we have someone discussed about the usage of mathematics in SVs and storyboards, I will mention about how I used mathematics for a tournament scene in a little project called "Extraterrestrial Index: The measure of Extraterrestriality". We went through quite a lot here but for this time I will explain the whole journey, but as short as possible.

### Exploratory Data Analysis

First off, we started with nothing but 4 Digit MWC 4 data. We started by exploring them to make some sense of what they are, and how they look more deeply.

By looking at how scores changed over each round of the tournament, we discovered a relationship between the scores with the right transformations. Next, we attempted to predict the survival rate of each team in the tournament making use of their qualifier scores. Here, we tried two approaches and found that there is some significant evidence that most of the qualifier maps were correlated to the chances of a team qualifying for each round.

### Outlier Detection

It was the time we had to get our hands dirty with some dilemmas. There were three problems:
- How can we define outliers or outperformers?
- How can we detect them using a mathematical model?
and most importantly:
- How can we explain a complex mathematical model to those who don't have a mathematical background? And how do we make sure that the method we proposed works, and makes sense in a tournament or ranked environment?

These questions boils down to a model that detects overperforming players, that complimented the tournament environment and was (hopefully) explainable to people. This idea was transformed into mathematical concepts that determined the *ET* index of a given player, given scores set by them. This metric was then used to decide whether a player outperformed for their rank range.

We tried to define them in the simplest way possible by adjusting the standardized scores such that it would be able to interpolate and handle missing scores among several other conditions.

We used this metric with the well-known Outlier Detection Algorithms, to be precise, **Support Vector Machines**, or **Local Outlier Factors** (with adjusted metrics especially for this study).

The fascinating thing is, we can explain these complex algorithms simply using some analogies. The **Local Outlier Factor** will detect and isolate a point that is *Too Far* from the rest of its cluster. This was done by adding scores into the metric consideration to detect the data points that are both *Too Far* and *Too High* relative to the others. Meanwhile, the **Support Vector Machine** method is simpler, which basically informs whether a player was an outlier using a linear combination of the performance metrics. Both algorithms worked for the outliers with the specific features. Overall, this project has inspired me to delve deeper into data mining and anomaly detection in data science.

### Storyboarding

I found myself using a lot of mathematics and computer science concepts in storyboarding too. **Trigonometry** and **linear algebra** concepts were used quite often in this field especially when you do tricks with particles. For example, to create a rain effect, we used a *2d rotation matrix* to generate rain particles with different angles. **Short Time Fourier Transform** methods were used for creating audio visualizers as well. Not to mention, it was necessary to have an idea about **Object-Oriented Programming**, to encapsulate storyboard objects into the workable data types. And as alluded to by Evening, **time and space complexity** was a factor that we had to consider while coding. This was to **minimize** the amount of storage used for the `.osb` (storyboard) file, and to make sure laptops would not explode running them.

---

Phew, that was all from me.

However, there was one thing I was really curious about. I wanted to know what they were looking for, or doing for the future of our *beloved* community. Hence, I asked:

*"What mathematics oriented projects in osu!mania that you would like to see, or get your hands on in the future?"*

---

## Evening:

Obviously, I have many complex ideas that don't come to life. 

- 3D NotITG Storyboarding: (Spin Eternally is not 3D) Firstly, 3D games... are not 3D. Somehow, they mapped 3D visuals to 2D. It's a lot of math and trigonometry. Would be cool to see it happen!
- Aesthetic Programmed Maps: Draw a sinusoidal wave on maps with notes. Draw one more, and so on, they make cool effects! Can you make the sine wave thicker? What about using a Triangle Wave? The possibilities are endless, and they will likely look beautiful.
- Stop-Motion Note Art: Basing off the idea of stop-motion measure lines, can you make stop-motion art? Go ahead and create the next Bad Apple!
- Lane-independent SVs: Likely only happening in SBs, but this would be very funny.

Currently, I'm working on a research project for score estimation on osu!mania. So that's a lot of work already, feel free to nab any of these ideas. 

A fair warning though, some are extremely complex, please give up if you want, you don't get paid.

---

My eyes shined like the constellations in the sky. Of course there was something that I am interested in...

*"I would be interested to get my hands on 3D Storyboarding! Mathematical Graphics are always fun to try and experiment. I've also been working on something similar for the performance estimation of osu!mania players... If I have more ideas for this I will make sure to tell you too!"*

---

## Komi

While I'm not on board with how they're being used right now, I'm really interested in how we could integrate big language models (like ChatGPT, you probably know these) into osu!mania. After all, given that we already classify notes in "patterns" like sounds do in "words", we could try representing mapping as a "language". Who knows what the hell we could do with it? Could we give the mapper suggestions for his current map if he's stuck on mapping a part? And just like we can create language, we can analyze it, so could we detect inconsistencies or awkward patterns in a map? Of course, any of these ideas are light years away yet, but in the end AI is just a bunch of silly mathematical functions arranged in a fancy way, so it's not hard to believe we may see it being used more and more in our game from now onwards. 

---

Again, that was a great observation she brought up. This was the way to connect *art* and *mathematics* together, which is surprisingly interdisciplinary. Well, it was beautiful to see the magic happen... but it was not beautiful to learn. It's more like the learners needed to experience it by themselves.

*"Of course mapping is the way to communicate between mappers and players as well! It is like... one of those... mangas? That the authors are trying to express their approaches and thoughts on the song as well."*

*"I actually had the same idea a while ago that the note could be represented as each character in English... For example the [12] can be the same as the 24th ASCII Character. This is another way to visualize the maps for the machine to understand."*

*"However, it is much more difficult to do when time is involved as a variable. I really look forward to the map generation model which involves both the **space** (notes) and **time**!"*

With that, it was the time that I needed to answer my own question again:

---

## Index:

Well, this is not really mathematics related but I personally want to see a repository where all tournament histories would be collated in, so statisticians may easily access the data required for analyses. For example, the current ETI model uses score data from statistics sheets, which are not always in the same format and frequently, they are not easy to convert into a format friendly for data analysis. Foreseeing the usage of convex optimization in the osu!mania scene, such as in tournament team selection (which Komi had actually done it). Really looking forward to seeing more of them used in osu!mania scene!

Many features in this game, whether they be for tournament constructs, or for storyboard aesthetics, are open for experimentation with mathematics, statistics and computer science. Everything else required is simply the motivation to get your hands dirty, and the curiosity to learn more.

---

That left me with the last question. I hoped this conversation would also inspire the future community as well as welcoming more project ideas. Hence, I asked:

*"Do you have anything to tell to someone who is interested in your projects, or encourage people to learn mathematics?"*

---

## Evening:

If you're using any of my work, thanks! One of the best compliments I can get is to hear people use my open-sourced projects for good. 

If you're interested in programming, go ahead and try. There's no consequences if you fail, and all the benefits if you find your passion here. However, how do you start? 

### You don't need the Know HOW, but the Know WHY

- HOW do I start programming? (Not Essential)
- WHY do I need programming? (Essential)

Story of Reamber: **WHY** without **HOW**

- **reamber**: I built reamber because I was sick of doing SVs manually. 
- **reamberPy**: I built reamberPy because I need more than what reamber offers

I started reamber with no programming knowledge. The motivation to complete them powered me through years, where I've learnt all essential programming knowledge by just trial and failure. 

**HOW** without **WHY**

Now with years of programming knowledge, if you'd ask me to program something that I'm not interested in, I'm definitely not going to do it.

### Math as a mean

I see math as a tool of communication, much like english. In my field of work, by just knowing math is not enough, you'd need to bring value to it. Thus, while I do encourage learning math, you'd need to find your **KNOW WHY**, not just the **KNOW HOW**.

---

## Komi:

Just like architecture, math can be an art, but it's not its main purpose. In its core, it's just something necessary to solve problems for you, to make your life easier. And just like a building, you start by the foundations, and build your knowledge with care and making sure you don't miss any important parts. Whether it's for your job, your hobby or a silly key smashing game, math can be used anywhere, and it will be there for you to help you if you can understand what you want to solve and why you want to solve it. And there's no need to have a huge maths and science background to solve cool problems; even middle school maths can be powerful enough to save you out a pinch or two. Give it a try!

---

## Index:

I've received a lot of feedback for the ETI model and I would like to say thank you for the feedback! I didn't have much time to respond to them but obviously these will be taken into considerations. I really understand that the model we built would determine the fates of some mania players in 4 Digit MWC which is considered a huge scale tournament and I really appreciate you all who wanted this model to be more accurate, in line with the hype generated around this tournament. Thank you so much for taking your time with this.

However, if you want to start doing projects related to mathematics, this may be a good place to start with if you are really interested. You will learn a lot during the process. Set your goals, go through some exploration and eventually in this labyrinth, there will be an exit, and that exit is just an entrance to the bigger maze, bigger ideas and bigger inspirations!

Good luck on your journey, and I hope this will inspire you not only in osu, but in real life.

---

It was *statistically significant* that I enjoyed a lot of this discussion, and as well got a lot of ideas and inspirations from it.

Pretty sure it would be a nice day for me. Looking at the clock, I realized it was my time to do some *progress* on my job again. I nodded in respect to the two intellectual minds.

*"To be honest, meeting two of you made my day, so thank you so much for this. I will need to get to work now, really hope to see you all again!"*

I waved my hands and nodded again, then said thank you to the barista. As I turned around, the day continued.
